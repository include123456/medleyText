{"_id":"S1mp0cVGf","title":"oracle index ","body":{"blocks":[{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ag6qs","text":"oracle index ","type":"header-one"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8qa9g","text":"索引是关系数据库中用于存放每一条记录的一种对象，主要目的是加快数据的读取速度和完整性检查。建立索引是一项技术性要求高的工作。一般在数据库设计阶段的与数据库结构一道考虑。应用系统的性能直接与索引的合理直接有关。下面给出建立索引的方法和要点。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4s9lq","text":"§3.5.1 建立索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"epgj6","text":"1. CREATE INDEX命令语法:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"euf84","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5vsue","text":"CREATE INDEX","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"d9f7c","text":"CREATE [unique] INDEX [user.]index","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"198g8","text":"ON [user.]table (column [ASC | DESC] [,column","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"98dj4","text":"[ASC | DESC] ] ... )","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cnf9m","text":"[CLUSTER [scheam.]cluster]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1u9q2","text":"[INITRANS n]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9lj65","text":"[MAXTRANS n]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"31ghl","text":"[PCTFREE n]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3ei80","text":"[STORAGE storage]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9o6bi","text":"[TABLESPACE tablespace]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"af1b0","text":"[NO SORT]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f836a","text":"Advanced","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"higm","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"trkr","text":"其中：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4l1kb","text":"   schema ORACLE模式，缺省即为当前帐户","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"sai7","text":"   index 索引名","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"35jj6","text":"   table 创建索引的基表名","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fg17h","text":"   column 基表中的列名，一个索引最多有16列，long列、long raw","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"619hs","text":"              列不能建索引列","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e3m66","text":"   DESC、ASC 缺省为ASC即升序排序","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bclgc","text":"   CLUSTER 指定一个聚簇（Hash cluster不能建索引）","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ccm67","text":"   INITRANS、MAXTRANS 指定初始和最大事务入口数","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5slem","text":"   Tablespace 表空间名","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1f9he","text":"   STORAGE 存储参数，同create table 中的storage.","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"agf9q","text":"   PCTFREE 索引数据块空闲空间的百分比(不能指定pctused)","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3ikfn","text":"   NOSORT 不（能）排序（存储时就已按升序，所以指出不再排序）","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fghuf","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5r5o2","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9ltso","text":"2.建立索引的目的：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"13nm","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1bqig","text":"建立索引的目的是：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9po2s","text":"l 提高对表的查询速度；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"enu9i","text":"l 对表有关列的取值进行检查。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f64v8","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"144vh","text":"但是，对表进行insert,update,delete处理时，由于要表的存放位置记录到索引项中而会降低一些速度。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b06s8","text":"注意：一个基表不能建太多的索引；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dpq3s","text":"      空值不能被索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5tfu3","text":"      只有唯一索引才真正提高速度,一般的索引只能提高30%左右。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bld97","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dnasu","text":"   Create index ename_in on emp (ename,sal);","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e9nq5","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f1rs5","text":"例1：商场的商品库表结构如下，我们为该表的商品代码建立一唯一索引，使得在前台POS收款时提高查询速度。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"671b0","text":"Create table good(good_id number(8) not null,/* 商品条码 */","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5r8","text":"                   Good_desc varchar2(40), /* 商品描述 */","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"at2h","text":"                   Unit_cost number(10,2) /* 单价 */","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"adkku","text":"                   Good_unit varchar2(6), /* 单位 */","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2dia6","text":"                   Unit_pric number(10,2) /* 零售价 */","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7tt7s","text":"                   )；","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3l0ua","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e8tgt","text":"注：提高查询速度的方法还有在表上建立主键，主键与唯一索引的差别","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8lcc5","text":"在于唯一索引可以空，主键为非空，比如：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3sl8k","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c82dv","text":"Create table good(good_id number(8) primary key,","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7f6c8","text":"                    Good_desc Varchar2(40),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"alcrc","text":"                    Unit_cost number(10,2),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"csi5l","text":"                    Good_unit char(6),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"a33s2","text":"                    Unit_pric number(10,2)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f7c9k","text":"                   );","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5sm4p","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9sk15","text":"§3.5.2 修改索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2tqcd","text":"对于较早的Oracle版本，修改索引的主要任务是修改已存在索引的存储参数适应增长的需要或者重新建立索引。而Oracle8I及以后的版本，可以对无用的空间进行合并。这些的工作主要是由管理员来完成。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cc7md","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"api21","text":"简要语法结构如下,更详细的语法图见电子文档《Oracle8i Reference 》 中的 Alter index.","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b9c4f","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"84m4p","text":"ALTER [UNIQUE] INDEX [user.]index","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"56g8c","text":"[INITRANS n]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bdso9","text":"[MAXTRANS n] ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4u1u3","text":"REBUILD ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"68trg","text":"[STORAGE n]","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"eg2rr","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dqcia","text":"其中：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7nvda","text":"REBUILD 是 根据原来的索引结构重新建立索引，实际是删除原来的索引后再重新建立。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fb127","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c43dp","text":"提示：DBA经常用 REBUILD 来重建索引可以减少硬盘碎片和提高应用系统的性能。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cr8g9","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"d5akd","text":"例：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b1m04","text":"alter index pk_detno rebuild storage(initial 1m next 512k);","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bugg9","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3o5r3","text":"ALTER INDEX emp_ix REBUILD REVERSE;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3g5cj","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"h86k","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"a1c43","text":"Oracle8i 的新功能可以对索引的无用空间进行合并，它由下面命令完成：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e6one","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ajbkj","text":"ALTER INDEX . . . COALESCE;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bt8gm","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2p7dg","text":"例如：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6t53","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6hjol","text":"ALTER INDEX ename_idx COALESCE;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bnq1m","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"64m3f","text":"§3.5.3 删除索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"91p80","text":"当不需要时可以将索引删除以释放出硬盘空间。命令如下：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5m3k3","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2ectk","text":"DROP INDEX [schema.]indexname","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4r99a","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9csic","text":"例如：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bp602","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"eecdf","text":"sql> drop index pk_dept;","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"22jk1","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ae8lj","text":"注：当表结构被删除时，有其相关的所有索引也随之被删除。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"btaod","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8d3u5","text":"§3.6 新索引类型","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4ao0f","text":"Oracle8i为了性能优化而提供新的创建新类型的索引。这些新索引在下面介绍：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1bh0i","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ch5rn","text":"§3.6.1 基于函数的索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2e8u2","text":"基于函数的索引就是存储预先计算好的函数或表达式值的索引。这些表达式可以是算术运算表达式、SQL或PL/SQL函数、C调用等。值得注意的是，一般用户要创建函数索引，必须具有GLOBAL QUERY REWRITE和CREATE ANY INDEX权限。否则不能创建函数索引，看下面例子：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"coht8","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cp8fb","text":"例1：为EMP表的ename 列建立大写转换函数的索引idx ：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e8arp","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4nq0a","text":"CREATE INDEX idx ON emp ( UPPER(ename));","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"77tn8","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"45v4g","text":"这样就可以在查询语句来使用：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3u82p","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9vcvd","text":"SELECT * FROM EMP WHERE UPPER(ename) LIKE ‘JOH%’;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"d24p7","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1h6vn","text":"例2：为emp 的工资和奖金之和建立索引：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5rt14","text":"1) 查看emp 的表结构：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ajnts","text":"SQL> desc emp","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1v7up","text":" Name Null? Type","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1nort","text":" ----------------------------------------- -------- ------------------","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fnek6","text":" EMPNO NOT NULL NUMBER(4)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b1jjs","text":" ENAME VARCHAR2(10)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8kph1","text":" JOB VARCHAR2(9)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c4kjo","text":" MGR NUMBER(4)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7tl","text":" HIREDATE DATE","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"71hn1","text":" SAL NUMBER(7,2)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"433qk","text":" COMM NUMBER(7,2)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b17jo","text":" DEPTNO NUMBER(2)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9ncu6","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"18d1j","text":"2)没有授权就创建函数索引的提示：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3jvqg","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ao7ns","text":"SQL> create index sal_comm on emp ( (sal+comm)*12, sal,comm)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"da6jg","text":" 2 tablespace users storage(initial 64k next 64k pctincrease 0);","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6nilk","text":"create index sal_comm on emp ( (sal+comm)*12, sal,comm)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"a8g6a","text":"                                          *","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"29qj6","text":"ERROR at line 1:","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b49hd","text":"ORA-01031: insufficient privileges","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1h15c","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c3424","text":"3) 连接到DBA帐户并授权：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4o8n3","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dgnhe","text":"SQL> connect sys/sys@ora816","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5rcbf","text":"Connected.","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bj7rq","text":"SQL> grant GLOBAL QUERY REWRITE to scott;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"24u3v","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"800hu","text":"Grant succeeded.","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3srac","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"14a11","text":"SQL> grant CREATE ANY INDEX to scott;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b6427","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8ddi0","text":"Grant succeeded.","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3bce9","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2t1i8","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fdg3r","text":"4）在连接到scott帐户，创建基于函数的索引：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"836b","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2j3ph","text":"SQL> connect scott/tiger@ora816","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"d8mu1","text":"Connected.","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"mqcu","text":"SQL> create index sal_comm on emp ( (sal+comm)*12, sal,comm)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"76vqs","text":" 2 tablespace users storage(initial 64k next 64k pctincrease 0);","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4ds88","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"321kb","text":"Index created.","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2i6hu","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bec49","text":"1)在查询中使用函数索引：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e92b4","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bg1oc","text":"SQL> select ename,sal,comm from emp where (sal+comm)*12 >5000;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"93lu0","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"38cdj","text":"ENAME SAL COMM","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"84run","text":"---------------------- ---------------- ----------------","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4ll3m","text":"ALLEN 1600 300","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"938vt","text":"WARD 1250 500","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e0j33","text":"MARTIN 1250 1400","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9atno","text":"TURNER 1500 0","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"16rov","text":"    赵元杰 1234.5 54321","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e7ruh","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f2v8o","text":"§3.6.2 反向键索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9ipe4","text":"反向键索引通过反向键保持索引的所有叶子键上的插入分布。有时，可用反向键索引来避免不平衡的索引。对于反向键索引可以进行下面操作：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"47n49","text":"l 通过在ALTER INDEX命令后加REBUILD NOREVERSE或REBUILD REVERSE子句来使索引边为反向键索引或普通索引；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"860rk","text":"l 采用范围扫描的查询不能使用反向键索引；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c2ak3","text":"l 位图索引不能反向；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"13jq1","text":"l 索引编排表不能反向。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"bbuvs","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2i467","text":"例1：创建一个反向键索引：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1allj","text":"CREATE INDEX i ON t (a,b,c) REVERSE;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dals2","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9o4l8","text":"例2：使一个索引变为反向键索引：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ck9nh","text":"ALTER INDEX i REBUILD NOREVERSE;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7kvcd","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"mknr","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b7g5g","text":"§3.6.3 索引组织表","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3bajc","text":"与普通的索引不一样，索引组织表（Index_Organized Table）是根据表来存储数据，即将索引和表存储在一起。这样的索引结构表（Index_organized table—IOT）的特点是：对表数据的改变，如插入一新行、删除某行都引起索引的更新。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"715gf","text":"索引组织表就象带一个或多个列所有的普通表一样，但索引组织表在B-树索引结构的叶节点上存储行数据。通过在索引结构中存储数据，索引组织表减少了总的存储量，此外，索引组织表也改善访问性能。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"d0fkk","text":"由于表中的行与B_树索引存放在一起，每个行都没有ROWID，而是用主键来标识。但是Oracle会“猜”这些行的位置并为每个行分配逻辑的ROWID。此外，你可以为这样的表建立第二个索引。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"alvnl","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5g8pf","text":"创建索引结构表也是用CREATE TABLE 命令加ORGANIZATION INDEX关键字来实现。但是，这样的表在创建完后，你还必须为该表建立一个主键。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4v4n9","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"52o82","text":"例子：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9v3lu","text":"CREATE TABLE IOT_EXPAMPLE","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"hera","text":"(","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4c56o","text":"Pk_col1 number(4),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6kqkq","text":"Pk_col2 varchar2(10),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4rcbt","text":"Non_pk_col1 varchar2(40),","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3oveb","text":"Non_pk_col2 date,","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"7d8bh","text":"CONSTRAINT pk_iot PRIMARY KEY","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"anspp","text":"                 ( pk_col1, pk_col2)","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3vhuk","text":")","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e1bl","text":"ORGANIZATION INDEX","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"a21k6","text":"TABLESPACE INDEX","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"69oi4","text":"STORAGE( INITIAL 1M NEXT 512K PCTINCREASE 0 ); ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8fm2j","text":"索引组织表有些限制：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"85s4p","text":"l 不能使用唯一约束；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"egp5k","text":"l 必须具有一个主键；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8po9s","text":"l 不能建立簇；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4gksc","text":"l 不能包含LONG类型列；","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1j26s","text":"l 不支持分布和复制。","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5g7p4","text":"提示：如果建立了索引组织表，则会在DBA_TABLES中的IOT_TYPE和IOT_NAME列上记录有索引组织表的信息。 ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"22jmn","text":"例1．修改索引结构表 docindex 的索引段的INITRANS参数：","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"frf9h","text":"ALTER TABLE docindex INITRANS 4;","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ek5d5","text":"例2．下面语句加一个的溢出数据段到索引组织表 docindex中： ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cl3n0","text":"ALTER TABLE docindex ADD OVERFLOW; ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"95qgt","text":"例3．下面语句为索引组织表 docindex的溢出数据段修改INITRANS参数： ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"722ng","text":"ALTER TABLE docindex OVERFLOW INITRANS 4;","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ejcbr","text":"","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6lh4s","text":"============================================================================================================","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c28ul","text":"适当的使用索引可以提高数据检索速度，可以给经常需要进行查询的字段创建索引","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"pmkt","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3gvgu","text":"oracle的索引分为5种:唯一索引，组合索引，反向键索引，位图索引，基于函数的索引 ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6ruc6","text":"创建索引的标准语法:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"flqke","text":"CREATE INDEX 索引名 ON 表名 (列名) ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"f5umf","text":"     TABLESPACE 表空间名; ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1ohgp","text":"创建唯一索引:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5qhjs","text":"CREATE unique INDEX 索引名 ON 表名 (列名) ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"aq5j9","text":"     TABLESPACE 表空间名; ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"6ppu4","text":"创建组合索引:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"3mkku","text":"CREATE INDEX 索引名 ON 表名 (列名1,列名2) ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8dikb","text":"     TABLESPACE 表空间名; ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2c2ai","text":"创建反向键索引:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"a158k","text":"CREATE INDEX 索引名 ON 表名 (列名) reverse","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"880m5","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e7ebo","text":"     TABLESPACE 表空间名; ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"amk23","text":"查看文章   ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"i388","text":"oracle 查看索引类别以及查看索引字段被引用的字段方法2008年01月04日 星期五 13:20查看索引个数和类别","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"auugo","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cdaoa","text":"select * from user_indexes where table='表名' ;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5h1u4","text":"查看索引被索引的字段","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"9umsd","text":"SQL>select * from user_ind_columns where index_name=upper('&index_name');","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"5chbp","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"cmf15","text":"PS:","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"8k4vl","text":"查看某表的约束条件","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"2u9k5","text":"","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"dhujr","text":"SQL>select constraint_name, constraint_type,search_condition, r_constraint_name ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b0t0o","text":"from user_constraints where table_name = upper('&table_name'); ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"n4me","text":" ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"4ppkb","text":"SQL>select c.constraint_name,c.constraint_type,cc.column_name ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fp9mk","text":"from user_constraints c,user_cons_columns cc ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"53ca0","text":"where c.owner = upper('&table_owner') and c.table_name = upper('&table_name') ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"ajum7","text":"and c.owner = cc.owner and c.constraint_name = cc.constraint_name ","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"51acn","text":"order by cc.position;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"1k4r4","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"c2vn0","text":"查看视图的名称","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"e1s5i","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"fhf9j","text":" ","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"einhk","text":"SQL>select view_name from user_views;","type":"custom-code-block-sql"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"b1n92","text":"","type":"unstyled"},{"data":{},"depth":0,"entityRanges":[],"inlineStyleRanges":[],"key":"59kd9","text":"","type":"unstyled"}],"entityMap":{}},"dateCreated":"2017-12-18T01:49:47.232Z","lastUpdated":"2017-12-18T02:01:35.713Z","notebookId":"HkfhF54zz"}
